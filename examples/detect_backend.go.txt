package main

import (
    "fmt"
    "github.com/luxfi/mlx"
)

func main() {
    // Default auto-detection
    fmt.Println("=== MLX Backend Auto-Detection ===")
    fmt.Printf("Detected Backend: %s\n", mlx.GetBackend())
    
    device := mlx.GetDevice()
    fmt.Printf("Device: %s\n", device.Name)
    fmt.Printf("Memory: %.1f GB\n", float64(device.Memory)/(1024*1024*1024))
    
    fmt.Printf("\nInfo: %s\n", mlx.Info())
    
    // Test that Metal is preferred on Apple Silicon
    if mlx.GetBackend() == mlx.Metal {
        fmt.Println("\n✅ Correctly selected Metal backend (best for Apple Silicon)")
    } else if mlx.GetBackend() == mlx.CPU {
        fmt.Println("\n✓ Using CPU backend (Metal not available)")
    }
}
